<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="UTF-8">
    <title>HiPOS Open API by leeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="stylesheets/normalize.css" media="screen">
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-light.css" media="screen">
  </head>
  <body>
    <section class="page-header">
      <h1 class="project-name">HiPOS Open API</h1>
      <h2 class="project-tagline">HiPOS 应用程序接口</h2>
      <a href="https://github.com/leeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee/hiposapi" class="btn">View on GitHub</a>
      <a href="https://github.com/leeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee/hiposapi/zipball/master" class="btn">Download .zip</a>
      <a href="https://github.com/leeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee/hiposapi/tarball/master" class="btn">Download .tar.gz</a>
    </section>

    <section class="main-content">
      <h1>
<a id="hipos-open-api" class="anchor" href="#hipos-open-api" aria-hidden="true"><span class="octicon octicon-link"></span></a>HiPOS Open API</h1>

<blockquote>
<p>HiPOS 提供高效线易用的线下支付及相关业务的移动互联网O2O领域解决方案，HiPOS 开放平台向所有具备开发及接入能力的合作伙伴与开发者提供完整的业务接口，旨在鼓励商业模式和客户体验的创新与改进。</p>
</blockquote>

<h2>
<a id="特点" class="anchor" href="#%E7%89%B9%E7%82%B9" aria-hidden="true"><span class="octicon octicon-link"></span></a>特点</h2>

<ol>
<li>所有接口均通过HTTP SSL（<a href="https://zh.wikipedia.org/wiki/%E8%B6%85%E6%96%87%E6%9C%AC%E4%BC%A0%E8%BE%93%E5%AE%89%E5%85%A8%E5%8D%8F%E8%AE%AE">HTTPS</a>）安全通道使用，确保安全性和可靠性。</li>
<li>接口最大程度采用 <a href="https://zh.wikipedia.org/wiki/REST">REST</a> 风格，简单易用。</li>
<li>接口返回数据统一使用 <a href="https://zh.wikipedia.org/wiki/JSON">json</a> 格式。</li>
</ol>

<h2>
<a id="支持的-o2o-应用场景" class="anchor" href="#%E6%94%AF%E6%8C%81%E7%9A%84-o2o-%E5%BA%94%E7%94%A8%E5%9C%BA%E6%99%AF" aria-hidden="true"><span class="octicon octicon-link"></span></a>支持的 O2O 应用场景</h2>

<h3>
<a id="商户资料及支付设置" class="anchor" href="#%E5%95%86%E6%88%B7%E8%B5%84%E6%96%99%E5%8F%8A%E6%94%AF%E4%BB%98%E8%AE%BE%E7%BD%AE" aria-hidden="true"><span class="octicon octicon-link"></span></a>商户资料及支付设置</h3>

<p><img src="https://www.websequencediagrams.com/cgi-bin/cdraw?lz=566h55CG5ZGYLT4r5LqR5ZWG5Z-OOiDllYbmiLforr7nva4KAA8JLT4AFwyvvOWFpeaUr-S7mAAXEitIaVBPU-S6kTog5pu05pawAEsHtYTmlpkKABUILS0-LQBrCzw86L-U5ZuePj4ALh0AZw0AHywtPi0AgWcJOiA8POWujOaIkD4-&amp;s=earth" alt="商户资料及支付设置"></p>

<h3>
<a id="门店增加pos机" class="anchor" href="#%E9%97%A8%E5%BA%97%E5%A2%9E%E5%8A%A0pos%E6%9C%BA" aria-hidden="true"><span class="octicon octicon-link"></span></a>门店增加POS机</h3>

<p><img src="https://www.websequencediagrams.com/cgi-bin/cdraw?lz=566h55CG5ZGYLT4r5LqR5ZWG5Z-OOiDlop7liqBQT1PmnLoKAA8JLT4AGAvnoa7lrprpl6jlupcAFwwrSGlQT1PkupE6IOivt-axguiuvuWkh-aOiOadg-eggQoAGAgtLT4tAGgLPDzov5Tlm54-Pgpsb29wIOetieW-heWbnuiwgwogICAgAHAXABsMZW5kAFUKAIFEDVtjYWxsYmFja10AgQMM5oiQ5Yqf6YCa55-lAIFcCy0-LQCBOwoAgQ0LABUNAIIxCTogPDwAgiQMAE8GPj4&amp;s=earth" alt="门店增加POS机"></p>

<h3>
<a id="扫码提货" class="anchor" href="#%E6%89%AB%E7%A0%81%E6%8F%90%E8%B4%A7" aria-hidden="true"><span class="octicon octicon-link"></span></a>扫码提货</h3>

<p><img src="https://www.websequencediagrams.com/cgi-bin/cdraw?lz=5Yiw5bqX6aG-5a6iLT4rUE9T5py6OiDmiavnoIHmj5DotKcKAA8GLT4rSGlQT1PkupE6IAAUBuS6pOaYkwoADwgtPivkupHllYbln446IOiOt-WPluiuouWNleeKtuaAgQoAFQktLT4tAEMKPDwAGgw-PgphbHQg5bCa5pyq5pSv5LuYCiAgICAAWwsAgR4I57q_5LiL5LuY5qy-AB8FAIEiCACBPwjlpITnkIYADxIAcA8APAblrozmiJA-PgplbmQAgT0X56Gu6K6kAIIQBwCBNRnmiJDlip8-PgCCDwotPi0AglEJAIJPBQAdBgCCUggtPi0AgnwMOiA8PACBBAk&amp;s=earth" alt="扫码提货"></p>

<h3>
<a id="查询交易信息" class="anchor" href="#%E6%9F%A5%E8%AF%A2%E4%BA%A4%E6%98%93%E4%BF%A1%E6%81%AF" aria-hidden="true"><span class="octicon octicon-link"></span></a>查询交易信息</h3>

<p><img src="https://www.websequencediagrams.com/cgi-bin/cdraw?lz=566h55CG5ZGYLT4r5LqR5ZWG5Z-OOiDmn6XnnIvkuqTmmJMKAA8JLT4rSGlQT1PkupEAHgXor6Lpl6jlupflj4oAEgWk5piT57uf6K6hCgAhCC0tPi0ATgs8PAAaDD4-Cm9wdCB0ZXh0CiAgICAAThwAgQcG6K-m5oOFACgFAEMfACQGPj4KZW5kAIE4Cy0-LQCBawk6IDw85a6M5oiQPj4K&amp;s=earth" alt="查询交易信息"></p>

<h2>
<a id="o2o-hipos云端接口" class="anchor" href="#o2o-hipos%E4%BA%91%E7%AB%AF%E6%8E%A5%E5%8F%A3" aria-hidden="true"><span class="octicon octicon-link"></span></a>O2O HiPOS云端接口</h2>

<p><img src="https://www.websequencediagrams.com/cgi-bin/cdraw?lz=566h55CG5ZGYLT4rSGlTaG9w5bqU55SoOiAqUE9T5Lia5YqhKgoADgwAJAVQT1PkupE6IOiOt-WPllRva2VuICjln7rkuo7ln5_lkI0pCgAdCC0tPi0ATA48POi_lOWbnj4-Cmxvb3Ag562J5b6FAEAF5Zue6LCDCiAgICAAZg4AgQ4OACASZW5kAGgKAIE7EFtjYWxsYmFja13mjojmnYMAgSsF6YCa55-lAIFNDgCBJgUAgVQIAIEcCwBwHOaJp-ihjOWFt-S9kwCCKgkARhEAgl8JOiA8POWujOaIkD4-Cg&amp;s=earth" alt="业务授权"></p>

<h3>
<a id="接口调用鉴权" class="anchor" href="#%E6%8E%A5%E5%8F%A3%E8%B0%83%E7%94%A8%E9%89%B4%E6%9D%83" aria-hidden="true"><span class="octicon octicon-link"></span></a>接口调用鉴权</h3>

<p>您的应用发向HiPOS云API的每一个请求都必须包含授权令牌（Token），HiPOS将使用这个Token来识别应用的合法身份。出于安全原因，所有发放给应用的Token都有一定的有效期，请在Token即将过期前重新获取新的Token，以便后续业务的正常调用。</p>

<blockquote>
<p>POST /token</p>
</blockquote>

<p>路径参数：</p>

<blockquote>
<p>无</p>
</blockquote>

<p>请求参数：</p>

<blockquote>
<table>
<thead>
<tr>
<th align="left">参数</th>
<th align="left">类型</th>
<th align="left">说明</th>
<th align="left">必填</th>
<th align="left">示例</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left">app_domain</td>
<td align="left">string</td>
<td align="left">应用程序主机名</td>
<td align="left">是</td>
<td align="left"><a href="http://www.shop123.com">www.shop123.com</a></td>
</tr>
<tr>
<td align="left">notify_url</td>
<td align="left">string</td>
<td align="left">Token 通知地址</td>
<td align="left">是</td>
<td align="left"><a href="https://www.shop123.com/token_return.ashx">https://www.shop123.com/token_return.ashx</a></td>
</tr>
</tbody>
</table>
</blockquote>

<p>返回结果：</p>

<blockquote>
<pre><code>// 成功获得授权
{
    "token_response": {
        "code": "0",
        "msg": "已获取授权并成功通知。"
    }
}
// 无效的应用
{
    "token_response": {
        "code": "6001",
        "msg": "无效的应用，请检查域名（主机名）是否正确。"
    }
}
// 服务合约已经到期
{
    "token_response": {
        "code": "6002",
        "msg": "服务合约已经到期，请尽快续约以免影响您的正常业务。"
    }
}
</code></pre>
</blockquote>

<h3>
<a id="更新商户资料" class="anchor" href="#%E6%9B%B4%E6%96%B0%E5%95%86%E6%88%B7%E8%B5%84%E6%96%99" aria-hidden="true"><span class="octicon octicon-link"></span></a>更新商户资料</h3>

<blockquote>
<p>PUT /merchants/{<strong><em>merchantId</em></strong>}</p>
</blockquote>

<h3>
<a id="更新支付方式" class="anchor" href="#%E6%9B%B4%E6%96%B0%E6%94%AF%E4%BB%98%E6%96%B9%E5%BC%8F" aria-hidden="true"><span class="octicon octicon-link"></span></a>更新支付方式</h3>

<blockquote>
<p>PUT /merchants/{<strong><em>merchantId</em></strong>}/payments</p>
</blockquote>

<h3>
<a id="请求设备授权码" class="anchor" href="#%E8%AF%B7%E6%B1%82%E8%AE%BE%E5%A4%87%E6%8E%88%E6%9D%83%E7%A0%81" aria-hidden="true"><span class="octicon octicon-link"></span></a>请求设备授权码</h3>

<blockquote>
<p>GET /merchants/{<strong><em>merchantId</em></strong>}/stores/{<strong><em>storeId</em></strong>}/authcode</p>
</blockquote>

<h3>
<a id="查询交易统计" class="anchor" href="#%E6%9F%A5%E8%AF%A2%E4%BA%A4%E6%98%93%E7%BB%9F%E8%AE%A1" aria-hidden="true"><span class="octicon octicon-link"></span></a>查询交易统计</h3>

<blockquote>
<p>GET /merchants/{<strong><em>merchantId</em></strong>}/stores/{<strong><em>storeId</em></strong>}/trades/overview</p>
</blockquote>

<h3>
<a id="查询交易详情" class="anchor" href="#%E6%9F%A5%E8%AF%A2%E4%BA%A4%E6%98%93%E8%AF%A6%E6%83%85" aria-hidden="true"><span class="octicon octicon-link"></span></a>查询交易详情</h3>

<blockquote>
<p>GET /merchants/{<strong><em>merchantId</em></strong>}/stores/{<strong><em>storeId</em></strong>}/trades/detail</p>
</blockquote>

<h2>
<a id="o2o-应用端接口" class="anchor" href="#o2o-%E5%BA%94%E7%94%A8%E7%AB%AF%E6%8E%A5%E5%8F%A3" aria-hidden="true"><span class="octicon octicon-link"></span></a>O2O 应用端接口</h2>

<h3>
<a id="回调返回授权token通知" class="anchor" href="#%E5%9B%9E%E8%B0%83%E8%BF%94%E5%9B%9E%E6%8E%88%E6%9D%83token%E9%80%9A%E7%9F%A5" aria-hidden="true"><span class="octicon octicon-link"></span></a>[回调]返回授权Token通知</h3>

<h3>
<a id="回调设备授权成功通知" class="anchor" href="#%E5%9B%9E%E8%B0%83%E8%AE%BE%E5%A4%87%E6%8E%88%E6%9D%83%E6%88%90%E5%8A%9F%E9%80%9A%E7%9F%A5" aria-hidden="true"><span class="octicon octicon-link"></span></a>[回调]设备授权成功通知</h3>

<h3>
<a id="获取订单详情" class="anchor" href="#%E8%8E%B7%E5%8F%96%E8%AE%A2%E5%8D%95%E8%AF%A6%E6%83%85" aria-hidden="true"><span class="octicon octicon-link"></span></a>获取订单详情</h3>

<h3>
<a id="确认提货" class="anchor" href="#%E7%A1%AE%E8%AE%A4%E6%8F%90%E8%B4%A7" aria-hidden="true"><span class="octicon octicon-link"></span></a>确认提货</h3>

<h2>
<a id="独立软件供应商及开发者isv" class="anchor" href="#%E7%8B%AC%E7%AB%8B%E8%BD%AF%E4%BB%B6%E4%BE%9B%E5%BA%94%E5%95%86%E5%8F%8A%E5%BC%80%E5%8F%91%E8%80%85isv" aria-hidden="true"><span class="octicon octicon-link"></span></a>独立软件供应商及开发者（ISV）</h2>

<p>具备开发及接入能力的合作伙伴与开发者以ISV的身份为商户提供高度可定制的解决方案。</p>

<p><img src="http://www.websequencediagrams.com/cgi-bin/cdraw?lz=dGl0bGUgSVNW55Sz6K-35rWB56iLCklTVi0-K0hpUE9T5ZCI5L2c5LiT5ZGYOiAAIAYKAAkRLT4AGhPotYTotKjlrqHmoLgKYWx0IOWQiOagvAogICAgADASLT4tSVNWOiDpgJrov4fvvIhpc3ZJZCwgaXN2U2VjcmV077yJCmVsc2Ug5ouS57udACcgqbPlm54KZW5k&amp;s=earth" alt="ISV申请流程"></p>

<h2>
<a id="isv专用接口" class="anchor" href="#isv%E4%B8%93%E7%94%A8%E6%8E%A5%E5%8F%A3" aria-hidden="true"><span class="octicon octicon-link"></span></a>ISV专用接口</h2>

<p>供ISV向商户提供便捷的服务开通及配置能力，接口列表如下：</p>

<h3>
<a id="注册商户" class="anchor" href="#%E6%B3%A8%E5%86%8C%E5%95%86%E6%88%B7" aria-hidden="true"><span class="octicon octicon-link"></span></a>注册商户</h3>

<blockquote>
<p>PUT /v1/isv/{<strong><em>isvId</em></strong>}/merchants</p>
</blockquote>

<p>路径参数：</p>

<blockquote>
<table>
<thead>
<tr>
<th align="left">参数</th>
<th align="left">类型</th>
<th align="left">说明</th>
<th align="left">示例</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left">isvId</td>
<td align="left">string</td>
<td align="left">ISV 唯一标识</td>
<td align="left">20151001</td>
</tr>
</tbody>
</table>
</blockquote>

<p>请求参数：</p>

<blockquote>
<table>
<thead>
<tr>
<th align="left">参数</th>
<th align="left">类型</th>
<th align="left">说明</th>
<th align="left">必填</th>
<th align="left">示例</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left">name</td>
<td align="left">string</td>
<td align="left">商户名称</td>
<td align="left">是</td>
<td align="left">海商咖啡</td>
</tr>
<tr>
<td align="left">contact</td>
<td align="left">string</td>
<td align="left">联系人姓名</td>
<td align="left">是</td>
<td align="left">吕轻候</td>
</tr>
<tr>
<td align="left">mobile</td>
<td align="left">string</td>
<td align="left">手机</td>
<td align="left">是</td>
<td align="left">18551838888</td>
</tr>
<tr>
<td align="left">telephone</td>
<td align="left">string</td>
<td align="left">电话</td>
<td align="left"></td>
<td align="left">0731-66666666</td>
</tr>
<tr>
<td align="left">email</td>
<td align="left">string</td>
<td align="left">电子邮箱</td>
<td align="left"></td>
<td align="left"><a href="mailto:lvqinghou@163.com">lvqinghou@163.com</a></td>
</tr>
<tr>
<td align="left">address</td>
<td align="left">string</td>
<td align="left">地址</td>
<td align="left"></td>
<td align="left">湖南省长沙市芙蓉区韶山北路139号</td>
</tr>
</tbody>
</table>
</blockquote>

<p>返回结果：</p>

<blockquote>
<pre><code>{
  merchant_id: '1001',
  app_id: 'c4ca4238a0b923820dcc509a6f75849b',
  app_secret: 'c40966e8f40a455425610606561819fa2a578c32',
  expire_at: '2016-11-23 00:59:13'
}
</code></pre>
</blockquote>

      <footer class="site-footer">
        <span class="site-footer-owner"><a href="https://github.com/leeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee/hiposapi">HiPOS Open API</a> is maintained by <a href="https://github.com/leeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee">leeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee</a>.</span>

        <span class="site-footer-credits">This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the <a href="https://github.com/jasonlong/cayman-theme">Cayman theme</a> by <a href="https://twitter.com/jasonlong">Jason Long</a>.</span>
      </footer>

    </section>

  
  </body>
</html>
